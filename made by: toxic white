-- Plants vs Brainrot Script with UI
-- Universal Support: All Executors & Devices (PC, Android, iOS)
-- Compatible with: Synapse, Script-Ware, Krnl, Fluxus, Delta, Arceus X, Codex, etc.

-- Check executor and device compatibility
local function getExecutorInfo()
    local executor = identifyexecutor and identifyexecutor() or "Unknown"
    local device = "PC"
    
    if game:GetService("UserInputService").TouchEnabled and not game:GetService("UserInputService").KeyboardEnabled then
        device = "Mobile"
    end
    
    return executor, device
end

local executorName, deviceType = getExecutorInfo()
print("Executor:", executorName, "| Device:", deviceType)

-- Universal compatibility functions
local function safeRequire(url)
    local success, result = pcall(function()
        return loadstring(game:HttpGet(url))()
    end)
    return success and result or nil
end

local FluentUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/obfalchx/testfluent/refs/heads/main/FluentTrau"))()

-- Variables
local autoFarmEnabled = false
local autoTeleportEnabled = false
local autoBuyAllSeedEnabled = false
local autoBuyAllGearEnabled = false
local autoPlantSecretEnabled = false

local autoSellEnabled = false
local sellRarity = "Rare"
local sellType = "Brainrot"

local autoGiftEnabled = false
local giftTarget = ""
local giftType = "Brainrot"

local autoBuySeedEnabled = false
local buyRarity = "Rare"
local autoBuyGearStockEnabled = false

-- Config Variables
local antiAFKEnabled = false
local antiBanEnabled = false
local antiKickEnabled = false

-- Create Window
local Window = FluentUI:CreateWindow({
    Title = "Plants vs Brainrot",
    SubTitle = "Script Hub",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark"
})

-- Create Tabs
local Tabs = {
    Main = Window:AddTab({Title = "Main", Icon = "home"}),
    AutoSell = Window:AddTab({Title = "Auto Sell", Icon = "shopping-cart"}),
    AutoGift = Window:AddTab({Title = "Auto Gift", Icon = "gift"}),
    Shop = Window:AddTab({Title = "Shop", Icon = "shopping-bag"}),
    Config = Window:AddTab({Title = "Config", Icon = "settings"})
}

-- TAB 1: MAIN
Tabs.Main:AddParagraph({
    Title = "Main Features",
    Content = "T·ª± ƒë·ªông farm v√† thu th·∫≠p t√†i nguy√™n"
})

Tabs.Main:AddToggle("AutoFarm", {
    Title = "Auto Farm A-Z",
    Default = false,
    Callback = function(v)
        autoFarmEnabled = v
        while autoFarmEnabled do
            -- Logic auto farm
            print("Auto farming...")
            task.wait(1)
        end
    end
})

Tabs.Main:AddToggle("AutoTeleport", {
    Title = "Auto Teleport & Collect Money",
    Default = false,
    Callback = function(v)
        autoTeleportEnabled = v
        while autoTeleportEnabled do
            -- Logic teleport ƒë·∫øn brainrot v√† collect money
            print("Teleporting to brainrot and collecting money...")
            task.wait(2)
        end
    end
})

Tabs.Main:AddToggle("AutoBuyAllSeed", {
    Title = "Auto Buy All Seed Shop",
    Default = false,
    Callback = function(v)
        autoBuyAllSeedEnabled = v
        if autoBuyAllSeedEnabled then
            -- Logic mua t·∫•t c·∫£ seed
            print("Buying all seeds from shop...")
        end
    end
})

Tabs.Main:AddToggle("AutoBuyAllGear", {
    Title = "Auto Buy All Gear Shop",
    Default = false,
    Callback = function(v)
        autoBuyAllGearEnabled = v
        if autoBuyAllGearEnabled then
            -- Logic mua t·∫•t c·∫£ gear
            print("Buying all gear from shop...")
        end
    end
})

Tabs.Main:AddToggle("AutoPlantSecret", {
    Title = "Auto Plant Secret Seed",
    Default = false,
    Callback = function(v)
        autoPlantSecretEnabled = v
        while autoPlantSecretEnabled do
            -- Logic tr·ªìng secret seed
            print("Planting secret seeds...")
            task.wait(3)
        end
    end
})

-- TAB 2: AUTO SELL
Tabs.AutoSell:AddParagraph({
    Title = "Auto Sell System",
    Content = "T·ª± ƒë·ªông b√°n brainrot ho·∫∑c plant theo ƒë·ªô hi·∫øm"
})

Tabs.AutoSell:AddDropdown("SellType", {
    Title = "Ch·ªçn lo·∫°i mu·ªën b√°n",
    Values = {"Brainrot", "Plant"},
    Default = 1,
    Callback = function(v)
        sellType = v
        print("Sell type:", v)
    end
})

Tabs.AutoSell:AddDropdown("SellRarity", {
    Title = "Ch·ªçn ƒë·ªô hi·∫øm",
    Values = {"Rare", "Epic", "Legendary", "Mythical"},
    Multi = true,
    Default = {"Rare"},
    Callback = function(v)
        sellRarity = v
        print("Selected rarities:", table.concat(v, ", "))
    end
})

Tabs.AutoSell:AddToggle("AutoSell", {
    Title = "B·∫≠t Auto Sell",
    Default = false,
    Callback = function(v)
        autoSellEnabled = v
        while autoSellEnabled do
            -- Logic auto sell
            print("Auto selling", sellType, "with rarities:", table.concat(sellRarity, ", "))
            task.wait(2)
        end
    end
})

-- TAB 3: AUTO GIFT
Tabs.AutoGift:AddParagraph({
    Title = "Auto Gift System",
    Content = "T·ª± ƒë·ªông t·∫∑ng brainrot ho·∫∑c plant cho ng∆∞·ªùi ch∆°i"
})

local playerList = {}
for _, player in pairs(game.Players:GetPlayers()) do
    if player ~= game.Players.LocalPlayer then
        table.insert(playerList, player.Name)
    end
end

Tabs.AutoGift:AddDropdown("GiftTarget", {
    Title = "Ch·ªçn ng∆∞·ªùi ch∆°i",
    Values = playerList,
    Default = 1,
    Callback = function(v)
        giftTarget = v
        print("Gift target:", v)
    end
})

Tabs.AutoGift:AddDropdown("GiftType", {
    Title = "Ch·ªçn lo·∫°i gift",
    Values = {"Brainrot", "Plant"},
    Default = 1,
    Callback = function(v)
        giftType = v
        print("Gift type:", v)
    end
})

Tabs.AutoGift:AddToggle("AutoGift", {
    Title = "B·∫≠t Auto Gift",
    Default = false,
    Callback = function(v)
        autoGiftEnabled = v
        while autoGiftEnabled do
            -- Logic auto gift
            print("Gifting", giftType, "to", giftTarget)
            task.wait(3)
        end
    end
})

-- TAB 4: SHOP
Tabs.Shop:AddParagraph({
    Title = "Auto Buy Shop",
    Content = "T·ª± ƒë·ªông mua seed v√† gear t·ª´ shop"
})

Tabs.Shop:AddDropdown("BuyRarity", {
    Title = "Ch·ªçn ƒë·ªô hi·∫øm seed",
    Values = {"Rare", "Epic", "Legendary", "Mythical", "Godly", "Secret"},
    Multi = true,
    Default = {"Rare"},
    Callback = function(v)
        buyRarity = v
        print("Selected buy rarities:", table.concat(v, ", "))
    end
})

Tabs.Shop:AddToggle("AutoBuySeed", {
    Title = "Auto Buy Seed",
    Default = false,
    Callback = function(v)
        autoBuySeedEnabled = v
        while autoBuySeedEnabled do
            -- Logic auto buy seed
            print("Auto buying seeds:", table.concat(buyRarity, ", "))
            task.wait(2)
        end
    end
})

Tabs.Shop:AddToggle("AutoBuyGearStock", {
    Title = "Auto Buy All Gear Stock",
    Default = false,
    Callback = function(v)
        autoBuyGearStockEnabled = v
        while autoBuyGearStockEnabled do
            -- Logic auto buy all gear in stock
            print("Auto buying all gear in stock...")
            task.wait(3)
        end
    end
})

-- TAB 5: CONFIG
Tabs.Config:AddParagraph({
    Title = "Protection & Safety",
    Content = "C√°c t√≠nh nƒÉng b·∫£o v·ªá t√†i kho·∫£n v√† ch·ªëng ph√°t hi·ªán"
})

Tabs.Config:AddToggle("AntiAFK", {
    Title = "Anti AFK",
    Description = "Ch·ªëng b·ªã kick do AFK - c√≥ th·ªÉ AFK v√¥ h·∫°n",
    Default = false,
    Callback = function(v)
        antiAFKEnabled = v
        if antiAFKEnabled then
            -- Anti AFK Logic
            local VirtualUser = game:GetService("VirtualUser")
            game:GetService("Players").LocalPlayer.Idled:connect(function()
                VirtualUser:CaptureController()
                VirtualUser:ClickButton2(Vector2.new())
                print("Anti AFK: Prevented idle kick")
            end)
            print("Anti AFK: Enabled")
        else
            print("Anti AFK: Disabled")
        end
    end
})

Tabs.Config:AddToggle("AntiBan", {
    Title = "Anti Ban",
    Description = "B·∫£o v·ªá kh·ªèi b·ªã ban (l√†m m·ªù h√†nh ƒë·ªông script)",
    Default = false,
    Callback = function(v)
        antiBanEnabled = v
        if antiBanEnabled then
            -- Anti Ban Logic - Th√™m delay ng·∫´u nhi√™n v√† l√†m h√†nh ƒë·ªông t·ª± nhi√™n h∆°n
            print("Anti Ban: Enabled - Actions will be more randomized")
            
            -- Hook c√°c h√†nh ƒë·ªông ƒë·ªÉ th√™m delay t·ª± nhi√™n
            local oldNamecall
            oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
                local method = getnamecallmethod()
                local args = {...}
                
                if antiBanEnabled and (method == "FireServer" or method == "InvokeServer") then
                    -- Th√™m delay ng·∫´u nhi√™n t·ª´ 0.1-0.5 gi√¢y
                    task.wait(math.random(10, 50) / 100)
                end
                
                return oldNamecall(self, ...)
            end)
        else
            print("Anti Ban: Disabled")
        end
    end
})

Tabs.Config:AddToggle("AntiKick", {
    Title = "Anti Kick",
    Description = "Ch·ªëng b·ªã kick kh·ªèi server",
    Default = false,
    Callback = function(v)
        antiKickEnabled = v
        if antiKickEnabled then
            -- Anti Kick Logic
            local LocalPlayer = game:GetService("Players").LocalPlayer
            local oldNamecall
            
            oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
                local method = getnamecallmethod()
                local args = {...}
                
                if method == "Kick" and antiKickEnabled then
                    print("Anti Kick: Prevented kick attempt")
                    return nil
                end
                
                return oldNamecall(self, ...)
            end)
            
            -- Ch·∫∑n LocalScript kick
            for _, v in pairs(getconnections(LocalPlayer.Kicked)) do
                v:Disable()
            end
            
            print("Anti Kick: Enabled")
        else
            print("Anti Kick: Disabled")
        end
    end
})

Tabs.Config:AddSection("Executor & Device Info")

Tabs.Config:AddParagraph({
    Title = "‚úÖ Universal Compatibility",
    Content = string.format("Executor: %s\nDevice: %s\nSupported: All executors & devices", executorName, deviceType)
})

Tabs.Config:AddParagraph({
    Title = "üì± Supported Executors",
    Content = "PC: Synapse X, Script-Ware, Krnl, Fluxus, Electron, JJSploit\n" ..
              "Android: Arceus X, Delta X, Codex, Hydrogen\n" ..
              "iOS: Delta, Esoteric, Nico's NextGen, Cassandra"
})

Tabs.Config:AddButton({
    Title = "Check Compatibility",
    Description = "Ki·ªÉm tra executor v√† device hi·ªán t·∫°i",
    Callback = function()
        FluentUI:Notify({
            Title = "Compatibility Check",
            Content = string.format("‚úÖ Executor: %s\n‚úÖ Device: %s\n‚úÖ Status: Fully Supported", executorName, deviceType),
            Duration = 5
        })
    end
})

Tabs.Config:AddButton({
    Title = "Rejoin Server",
    Description = "Tham gia l·∫°i server hi·ªán t·∫°i",
    Callback = function()
        local TeleportService = game:GetService("TeleportService")
        local Players = game:GetService("Players")
        local PlaceId = game.PlaceId
        local JobId = game.JobId
        
        TeleportService:TeleportToPlaceInstance(PlaceId, JobId, Players.LocalPlayer)
    end
})

Tabs.Config:AddButton({
    Title = "Server Hop",
    Description = "Chuy·ªÉn sang server kh√°c",
    Callback = function()
        local TeleportService = game:GetService("TeleportService")
        local HttpService = game:GetService("HttpService")
        
        local servers = HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
        
        for _, server in pairs(servers.data) do
            if server.id ~= game.JobId and server.playing < server.maxPlayers then
                TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id)
                break
            end
        end
    end
})

-- Notification
FluentUI:Notify({
    Title = "Plants vs Brainrot",
    Content = string.format("‚úÖ Script loaded!\nüñ•Ô∏è Device: %s\n‚ö° Executor: %s", deviceType, executorName),
    Duration = 5
})

print("Plants vs Brainrot Script Loaded!")
print("Universal Support: All Executors & Devices ‚úÖ")
